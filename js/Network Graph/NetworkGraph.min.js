function asyncGeneratorStep(n,t,i,r,u,f,e){try{var o=n[f](e),s=o.value}catch(h){i(h);return}o.done?t(s):Promise.resolve(s).then(r,u)}function _asyncToGenerator(n){return function(){var t=this,i=arguments;return new Promise(function(r,u){function f(n){asyncGeneratorStep(e,r,u,f,o,"next",n)}function o(n){asyncGeneratorStep(e,r,u,f,o,"throw",n)}var e=n.apply(t,i);f(undefined)})}}function readdata(){return _readdata.apply(this,arguments)}function _readdata(){return _readdata=_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jsstoreCon.select({from:"tbl_network",where:{id:"1"}});case 2:dat=n.sent;console.log(dat);case 4:case"end":return n.stop()}},n)})),_readdata.apply(this,arguments)}function initDb(){return _initDb.apply(this,arguments)}function _initDb(){return _initDb=_asyncToGenerator(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jsstoreCon.initDb(getDbSchema());case 2:t=n.sent;t?console.log("db created"):console.log("db opened");case 4:case"end":return n.stop()}},n)})),_initDb.apply(this,arguments)}function addNetworData(){return _addNetworData.apply(this,arguments)}function _addNetworData(){return _addNetworData=_asyncToGenerator(regeneratorRuntime.mark(function n(t){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,netmodel={id:"1",name:t},n.next=4,jsstoreCon.insert({into:"tbl_network",values:[netmodel]});case 4:i=n.sent;i===1&&alert("successfully added");n.next=14;break;case 8:return n.prev=8,n.t0=n["catch"](0),n.next=12,jsstoreCon.update({"in":"tbl_network",set:{name:t},where:{id:"1"}});case 12:i=n.sent;i===1&&alert("successfully updated");case 14:case"end":return n.stop()}},n,null,[[0,8]])})),_addNetworData.apply(this,arguments)}function deletedata(){return _deletedata.apply(this,arguments)}function _deletedata(){return _deletedata=_asyncToGenerator(regeneratorRuntime.mark(function n(t){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,jsstoreCon.remove({from:"tbl_network",where:{id:t}});case 3:i=n.sent;n.next=9;break;case 6:n.prev=6;n.t0=n["catch"](0);alert(n.t0.message);case 9:case"end":return n.stop()}},n,null,[[0,6]])})),_deletedata.apply(this,arguments)}function getDbSchema(){return{name:"Db_network",tables:[{name:"tbl_network",columns:{id:{primaryKey:!0,dataType:"string"},name:{notNull:!0,dataType:"string"}}}]}}function drag(n){disableFiberService();n.dataTransfer.setData("text",n.target.id)}function setDefaultLocale(){var r=navigator.language,t=document.getElementById("locale"),n,i;for(t.selectedIndex=0,n=0,i=t.options.length;n<i;++n)if(t.options[n].getAttribute("value")===r){t.selectedIndex=n;break}}function destroy(){network!==null&&(network.destroy(),network=null)}function draw(n){var t,i,r,u;if(destroy(),nodes=[],edges=[],t=document.getElementById("mynetwork"),nodes=new vis.DataSet([]),edges=new vis.DataSet([]),data={nodes:nodes,edges:edges},!n){i="";try{i=JSON.parse(dat[0].name);i.nodes.length>0&&(r=confirm("Are you want to load network data from local storage ?"),r&&(_edgesDB.insert(i),nodes=getNodeData(i.nodes),edges=getEdgeData(i.edges),counter=counter+Number(nodes.length),localStorage.setItem("nodelength",counter)))}catch(f){}}data={nodes:nodes,edges:edges};u={interaction:{navigationButtons:!0,keyboard:!0,dragView:!1,multiselect:!0,hover:!0},physics:!1,nodes:{shape:"dot",size:8},edges:{smooth:{enabled:!1,type:"continuous"}},manipulation:{enabled:!1,addNode:function(n,t){document.getElementById("operation").innerText="Add Node";document.getElementById("node-id").value=n.id;document.getElementById("node-label").value="site 1";document.getElementById("node-degree").value="5";document.getElementById("ddlnodeshape").value="dot";document.getElementById("ddlnodeType").value="ROADM";document.getElementById("saveButton").onclick=saveData.bind(this,n,t);document.getElementById("cancelButton").onclick=clearPopUp.bind();document.getElementById("network-popUp").style.display="block"},editNode:function(n,t){document.getElementById("operation").innerText="Edit Node";document.getElementById("node-id").value=n.id;document.getElementById("node-label").value=n.label;document.getElementById("node-degree").value=n.nodedegree;document.getElementById("ddlnodeType").value=n.nodetype;document.getElementById("ddlnodeshape").value=n.shape;n.nodeedit="true";document.getElementById("saveButton").onclick=saveData.bind(this,n,t);document.getElementById("cancelButton").onclick=cancelEdit.bind(this,t);document.getElementById("addButton").addEventListener("click",function(){AddData(this,0)});document.getElementById("addAmpButton").addEventListener("click",function(){AddData(this,1)});document.getElementById("addTraffButton").addEventListener("click",function(){AddData(this,2)});document.getElementById("network-popUp").style.display="block"},addEdge:function(n,t){if(n.from==n.to){var i=confirm("Do you want to connect the node to itself?");if(i!=!0){t(null);return}}document.getElementById("edge-operation").innerText="Add Edge";editEdgeWithoutDrag(n,t)},editEdge:{editWithoutDrag:function(n,t){document.getElementById("edge-operation").innerText="Edit Edge";editEdgeWithoutDrag(n,t)}}}};network=new vis.Network(t,data,u);network.on("click",function(n){n.event="[original event]";console.log(n.pointer);this.getNodeAt(n.pointer.DOM)||(this.getEdgeAt(n.pointer.DOM)?($("#txtNodeX").val(n.pointer.canvas.x),$("#txtNodeY").val(n.pointer.canvas.y)):($("#txtNodeX").val(n.pointer.canvas.x),$("#txtNodeY").val(n.pointer.canvas.y)))});network.on("selectEdge",function(n){if(_insertnodeDB().remove(),n.edges.length>1||n.edges.length==0){copyData.edges=[];copyData.nodes=[];copyData.dataCopied=!1;return}var t=this.body.edges[this.getEdgeAt(n.pointer.DOM)];n.label=network.body.edges[n.edges[0]].options.label;_insertnodeDB.insert({id:n.edges[0],type:"NodeInsert",label:n.label});setCopyData(t.options.id,"")});network.on("selectNode",function(n){var t=this.body.nodes[this.getNodeAt(n.pointer.DOM)],i=network.getConnectedEdges(t.id);if(localStorage.setItem("deletenodeconectededge",i.length),_nodesDB.insert({id:t.id,type:"node"}),setCopyData("",t.options.id),isAddEdge==1){if(isAddService=0,addServicData={from:"",to:""},addEdgeData.from=="")addEdgeData.from=t.options.id;else if(addEdgeData.to==""){if(addEdgeData.from==t.options.id){alert("pls click destination source");return}addEdgeData.to=t.options.id}addEdgeData.from!=""&&addEdgeData.to!=""&&manualAddEdge()}if(isAddService==1){if(isAddEdge=0,addEdgeData={from:"",to:""},addServiceData.from=="")addServiceData.from=t.options.id;else if(addServiceData.to==""){if(addServiceData.from==t.options.id){alert("pls click destination source");return}addServiceData.to=t.options.id}console.log(addServiceData);addServiceData.from!=""&&addServiceData.to!=""&&manualAddService();console.log(addServiceData)}});network.on("doubleClick",function(){var n=_nodesDB().first();n.type=="node"?network.editNodeMode():network.editEdgeMode();_nodesDB().remove()});network.on("oncontext",function(n){var h=_nodesDB().first(),f,t,e,o,i,s,r,u;h.type=="node"?(f=this.body.nodes[this.getNodeAt(n.pointer.DOM)],f!=undefined&&(document.getElementById("edgecontextMenu").style.display="none",$("#contextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),document.getElementById("contextMenu").style.display="block",t=this.body.nodes[this.getNodeAt(n.pointer.DOM)],document.getElementById("nodeiddetails").value=t.id,n.id=t.id,e=network.body.nodes[t.id].options.label,document.getElementById("nodeeditlabel").value=e,document.getElementById("nodeedit-degree").value=network.body.nodes[t.id].options.nodedegree,document.getElementById("ddleditnodeType").value=network.body.nodes[t.id].options.nodetype,$("#ddlshape").val(network.body.nodes[t.id].options.shape),$("#ddlcolor").val(network.body.nodes[t.id].options.color.background),document.getElementById("rightClickNodeEdit").onclick=rightClickNodeEdit.bind(),document.getElementById("rightClickNodeDelete").onclick=deleteNodeEdge.bind())):(o=this.body.edges[this.getEdgeAt(n.pointer.DOM)],o!=undefined&&(document.getElementById("contextMenu").style.display="none",document.getElementById("edgecontextMenu").style.display="block",$("#edgecontextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),i=this.body.edges[this.getEdgeAt(n.pointer.DOM)],document.getElementById("edgeiddetails").value=i.id,document.getElementById("from").value=network.body.edges[i.id].options.from,document.getElementById("to").value=network.body.edges[i.id].options.to,network.body.edges[i.id].options.label!=undefined&&(s=network.body.edges[i.id].options.label,document.getElementById("edgelabel").value=s),r=network.body.edges[i.id].options.arrows.to.enabled,u=network.body.edges[i.id].options.arrows.from.enabled,document.getElementById("edgearrow").value=r==!0&&u==!0?"to,form":r==!0?"to":u==!0?"from":"",document.getElementById("InsertNode").addEventListener("click",function(){AddData(this,0)}),document.getElementById("Copy").onclick=copy.bind(),document.getElementById("rightClickEdgeEdit").onclick=rightClickEdgeEdit.bind(),document.getElementById("rightClickEdgeDelete").onclick=deleteNodeEdge.bind()));copy=="Yes"&&(document.getElementById("contextMenu").style.display="none",$("#pastecontextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),document.getElementById("pastecontextMenu").style.display="block",document.getElementById("Paste").onclick=paste.bind());_nodesDB().remove()});t.addEventListener("dragover",function(n){n.preventDefault()});t.addEventListener("dragenter",function(n){n.target.className+=" dragenter"});t.addEventListener("dragleave",function(n){n.target.className="whiteBox"});t.addEventListener("drop",function(n){var t;n.dataTransfer.getData("text")=="btnAddMode"&&(counter=counter+1,localStorage.setItem("nodelength",counter),t=localStorage.getItem("nodelength"),t!=0?network.body.data.nodes.add({id:token(),label:"site "+Number(t)+"",nodedegree:"5",nodetype:"ROADM",shape:"dot",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}):network.body.data.nodes.add({id:token(),label:"site 1",nodedegree:"5",nodetype:"ROADM",shape:"dot",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}));n.dataTransfer.getData("text")=="btnAddAmp"&&(counter=counter+1,localStorage.setItem("nodelength",counter),t=localStorage.getItem("nodelength"),t!=0?network.body.data.nodes.add({id:token(),label:"site "+Number(t)+"",nodedegree:"5",shape:"triangle",color:"red",nodedegree:"2",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}):network.body.data.nodes.add({id:token(),label:"site 1",nodedegree:"5",shape:"triangle",color:"red",nodedegree:"2",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}));n.preventDefault()});network.on("dragStart",function(){});network.on("dragEnd",function(n){n.event="[original event]"});network.on("hoverNode",function(n){try{var t=nodes.get(n.node),i=t.label;$("#click").css({left:n.event.pageX+20+"px",top:n.event.pageY-40+"px"});$("#click").html(htmlTitle("label : "+i+"\ntype : "+t.componentType,t.color));$("#click").show()}catch(r){}});network.on("blurNode",function(){$("#click").hide()});network.on("hoverEdge",function(n){try{var t=edges.get(n.edge),i="("+nodes.get(t.from).label+" -> "+nodes.get(t.to).label+")";$("#click").css({left:n.event.pageX+20+"px",top:n.event.pageY-40+"px"});$("#click").html(htmlTitle("dir : "+i+"\ntype : "+t.componentType,t.color));$("#click").show()}catch(r){}});network.on("blurEdge",function(n){console.log("blurEdge Event:",n);$("#click").hide()})}function removeDefaultElement(){$("*.vis-manipulation").remove();$("*.vis-edit-mode").remove();$("*.vis-close").remove()}function AddMultipleNode(){var r,i,u;disableFiberService();r=getScaleFreeNetwork(10);console.log(r);var f=Number($("#txtNofNode").val()),n=0,t=0;for(i=1;i<=f;i++)n=n+10,t=t+10,counter=counter+1,localStorage.setItem("nodelength",counter),u=localStorage.getItem("nodelength"),network.body.data.nodes.add({id:token(),label:"site "+Number(u)+"",nodedegree:"5",nodetype:"ROADM",shape:"dot",x:n,y:t,componentType:"node"})}function rightClickNodeEdit(){disableFiberService();document.getElementById("contextMenu").style.display="none";document.getElementById("node-popUpdetails").style.display="block";document.getElementById("nodesaveButton").onclick=popupsaveNodeData.bind();document.getElementById("nodecancelButton").onclick=nodecancelNodeEdit.bind()}function deleteNodeEdge(){disableFiberService();document.getElementById("contextMenu").style.display="none";document.getElementById("edgecontextMenu").style.display="none";var n=localStorage.getItem("deletenodeconectededge");n=="0"||n==""?network.deleteSelected():alert("Unpair node and delete");localStorage.setItem("deletenodeconectededge","")}function rightClickEdgeEdit(){disableFiberService();document.getElementById("edgecontextMenu").style.display="none";document.getElementById("edge-popUpdetails").style.display="block";document.getElementById("edgesaveButton").onclick=popupsaveedgeData.bind();document.getElementById("edgecancelButton").onclick=edgecancelNodeEdit.bind()}function popupeditNode(n,t,i){document.getElementById("nodeeditlabel").value=n.label;document.getElementById("nodesaveButton").onclick=popupsaveNodeData.bind(this,n,i);document.getElementById("nodecancelButton").onclick=t.bind(this,i);document.getElementById("node-popUpdetails").style.display="block"}function edgecancelNodeEdit(){edgeclearNodePopUp()}function edgeclearNodePopUp(){document.getElementById("edgesaveButton").onclick=null;document.getElementById("edgecancelButton").onclick=null;document.getElementById("edge-popUpdetails").style.display="none"}function nodeclearNodePopUp(){document.getElementById("nodesaveButton").onclick=null;document.getElementById("nodecancelButton").onclick=null;document.getElementById("node-popUpdetails").style.display="none"}function nodecancelNodeEdit(){nodeclearNodePopUp()}function popupsaveNodeData(){var t=document.getElementById("nodeiddetails").value,i=document.getElementById("nodeeditlabel").value,r=document.getElementById("ddlshape").value,n=document.getElementById("ddlcolor").value,u=document.getElementById("ddleditnodeType").value,f=document.getElementById("nodeedit-degree").value;n!=""&&n!=0?network.body.data.nodes.update({id:t,label:i,shape:r,color:n,nodetype:u,nodedegree:f}):network.body.data.nodes.update({id:t,label:i,shape:r,nodetype:u,nodedegree:f});document.getElementById("node-popUpdetails").style.display="none"}function popupsaveedgeData(){var n=document.getElementById("edgelabel").value,t=document.getElementById("edgeiddetails").value,u=document.getElementById("from").value,f=document.getElementById("to").value,i=document.getElementById("ddleditedgecolor").value,r=document.getElementById("edgearrow").value;i!="0"?network.body.data.edges.update({id:t,length:length,color:i,arrows:r,label:n}):network.body.data.edges.update({id:t,length:length,arrows:r,label:n});_insertnodeDB({id:t}).update({label:n});_edgesDB({from:u,to:f}).update({label:n,color:i});document.getElementById("edge-popUpdetails").style.display="none"}function editEdgeWithoutDrag(n,t){var h,c,l,a,o,s,v,y,r,u;if(isService!=1){var f=0,e=0,p=network.body.nodes[n.from].options.nodedegree,w=network.body.nodes[n.to].options.nodedegree,o=network.getConnectedEdges(n.from),s=network.getConnectedEdges(n.to);o.forEach(function(n){var t=edges.get();for(i=0;i<t.length;i++)n==t[i].id&&t[i].componentType=="edge"&&(f=f+1)});s.forEach(function(n){var t=edges.get();for(i=0;i<t.length;i++)n==t[i].id&&t[i].componentType=="edge"&&(e=e+1)});f<Number(p)&&e<Number(w)?(n.label!=undefined&&(document.getElementById("edge-label").value=n.label),n.id!=undefined&&(r=network.body.edges[n.id].options.arrows.to.enabled,u=network.body.edges[n.id].options.arrows.from.enabled,document.getElementById("edge-arrow").value=r==!0&&u==!0?"to,form":r==!0?"to":u==!0?"from":""),document.getElementById("edge-saveButton").onclick=saveEdgeData.bind(this,n,t),document.getElementById("edge-cancelButton").onclick=cancelEdgeEdit.bind(this,t),document.getElementById("edge-popUp").style.display="block"):alert("Node Degree limit exist")}else o=network.getConnectedEdges(n.from),s=network.getConnectedEdges(n.to),o.forEach(function(t){var i=network.body.edges[t].options.from,r=network.body.edges[t].options.to;(i==n.from&&r==n.to||i==n.to&&r==n.from)&&(h=i,c=r)}),s.forEach(function(t){var i=network.body.edges[t].options.from,r=network.body.edges[t].options.to;(i==n.from&&r==n.to||i==n.to&&r==n.from)&&(l=i,a=r)}),h!=undefined&&c!=undefined||l!=undefined&&a!=undefined?(v=network.body.nodes[n.from].options.componentType,y=network.body.nodes[n.to].options.componentType,v=="node"&&y=="node"?(n.label!=undefined&&(document.getElementById("edge-label").value=n.label),n.id!=undefined&&(r=network.body.edges[n.id].options.arrows.to.enabled,u=network.body.edges[n.id].options.arrows.from.enabled,document.getElementById("edge-arrow").value=r==!0&&u==!0?"to,form":r==!0?"to":u==!0?"from":""),document.getElementById("edge-saveButton").onclick=saveEdgeData.bind(this,n,t),document.getElementById("edge-cancelButton").onclick=cancelEdgeEdit.bind(this,t),document.getElementById("edge-popUp").style.display="block"):(document.getElementById("edge-popUp").style.display="none",alert("Service not add between amplifier node"),isAddService=0)):alert("Create fiber then  service add")}function clearEdgePopUp(){document.getElementById("edge-label").value="";document.getElementById("edge-saveButton").onclick=null;document.getElementById("edge-cancelButton").onclick=null;document.getElementById("edge-popUp").style.display="none"}function cancelEdgeEdit(n){clearEdgePopUp();data.componentType="edge";isService==1&&(data.dashes=!0,data.label=document.getElementById("edge-label").value,data.font=fontstyle1,data.color="red",data.arrows=document.getElementById("edge-arrow").value,data.smooth=smooth1,data.componentType="service",isService=0);n(null)}function AddService(){disableFiberService();isService=1;data.componentType="service";network.addEdgeMode()}function RemoveSelection(){disableFiberService();var n=localStorage.getItem("deletenodeconectededge");n=="0"||n==""?network.deleteSelected():alert("Unpair node and delete");localStorage.setItem("deletenodeconectededge","")}function AddEdgeMode(){disableFiberService();isService=0;network.addEdgeMode()}function EditEdgeMode(){disableFiberService();network.editEdgeMode()}function AddNodeMode(){disableFiberService();network.addNodeMode()}function EditNodeMode(){disableFiberService();network.editNode()}function htmlTitle(n,t){const i=document.createElement("pre");return i.innerHTML=n,i.style.background=t,i.style.color="black",i.style.transition="all 1s ease-in-out",i}function saveEdgeData(n,t){if(isService!=1){typeof n.to=="object"&&(n.to=n.to.id);typeof n.from=="object"&&(n.from=n.from.id);n.label=document.getElementById("edge-label").value;_insertnodeDB({id:n.id}).update({label:n.label});n.title=document.getElementById("edge-title").value.toString();n.arrows=document.getElementById("edge-arrow").value.toString();document.getElementById("ddledgecolor").value!=0&&document.getElementById("ddledgecolor").value!==""&&document.getElementById("ddledgecolor").value!=undefined&&(n.color=document.getElementById("ddledgecolor").value);n.font=fontstyle1;n.componentType="edge";document.getElementById("edgeDashes").value=="true"&&(n.dashes=document.getElementById("edgeDashes").value);var i=_edgesDB({from:n.from,to:n.to}).get();i.length!=0?_edgesDB({from:n.from,to:n.to}).update({label:n.label,color:n.color,arrows:n.arrows,dashes:n.dashes}):_edgesDB.insert({from:n.from,to:n.to,dashes:n.dashes,arrows:n.arrows,label:n.label});clearEdgePopUp();t(n)}else n.dashes=!0,n.label=document.getElementById("edge-label").value,n.font=fontstyle1,n.color="red",n.arrows=document.getElementById("edge-arrow").value,n.smooth=smooth1,n.componentType="service",isService=0,document.getElementById("edge-popUp").style.display="none",clearEdgePopUp(),t(n)}function clearPopUp(){document.getElementById("node-degree").value="";document.getElementById("edge-label").value="";document.getElementById("saveButton").onclick=null;document.getElementById("cancelButton").onclick=null;document.getElementById("network-popUp").style.display="none"}function cancelEdit(n){clearPopUp();n(null)}function saveData(n,t){var i,r,u;n.nodeedit!="true"&&(counter=counter+1,localStorage.setItem("nodelength",counter));n.id=document.getElementById("node-id").value;n.label=document.getElementById("node-label").value;n.title=document.getElementById("node-title").value;i=document.getElementById("ddlnodeshape").value;shape=i;r=document.getElementById("ddlnodecolor").value;color=r;shape!=undefined&&shape!=null&&shape!=""&&shape!=0&&(n.shape=shape);color!=undefined&&color!=null&&color!=""&&color!=0&&(n.color=color);u=document.getElementById("ddlnodeType").value;n.nodetype=u;n.componentType="node";n.nodedegree=document.getElementById("node-degree").value;clearPopUp();t(n)}function AddData(n,t){disableFiberService();document.getElementById("edgecontextMenu").style.display="none";document.getElementById("network-popUp").style.display="none";document.getElementById("node-popUp").style.display="block";document.getElementById("nodeSaveButton").onclick=AddNode.bind(this,t)}function AddNode(n){var i=document.getElementById("ddlinsertnodeshape").value,r=_insertnodeDB().first(),f=network.getConnectedNodes(r.id),u,t;to_id=f[1];from_id=f[0];var e=edges.get(r.id).label,s=network.body.data.nodes.length,o=Number(s)+1;counter=counter+1;localStorage.setItem("nodelength",counter);u=localStorage.getItem("nodelength");t=token();n==0?i=="triangle"?(t,network.body.data.nodes.add({id:t,label:"site "+Number(u)+"",x:$("#txtNodeX").val(),y:$("#txtNodeY").val(),shape:i,size:8,color:"red",nodedegree:"5",nodetype:"ROADM",componentType:"Amplifier"})):network.body.data.nodes.add({id:t,label:"site "+Number(u)+"",x:$("#txtNodeX").val(),y:$("#txtNodeY").val(),shape:i,size:8,nodedegree:"5",nodetype:"ROADM",componentType:"node"}):n==1?network.body.data.nodes.add({id:t,label:""+o+"",size:8,x:$("#txtNodeX").val(),y:$("#txtNodeY").val(),componentType:"node"}):network.body.data.nodes.add({id:t,label:""+o+"",shape:i,size:8,color:"red",x:$("#txtNodeX").val(),y:$("#txtNodeY").val(),componentType:"node"});network.body.data.edges.remove(r.id);network.body.data.edges.add([{from:t,to:from_id,font:fontstyle1,componentType:"edge",label:e,color:"blue"}]);network.body.data.edges.add([{from:t,to:to_id,font:fontstyle1,componentType:"edge",label:e,color:"blue"}]);_edgesDB.insert({from:t,to:from_id});_edgesDB.insert({from:t,to:to_id});_insertnodeDB().remove();document.getElementById("node-popUp").style.display="none"}function init(n){initDb();readdata();n?(setDefaultLocale(),draw(n)):setTimeout(function(){setDefaultLocale();draw(n)},1e3)}function testing(){container=document.getElementById("mynetwork");importButton=document.getElementById("import_button");exportButton=document.getElementById("export_button")}function clearOutputArea(){}function exportNetwork(n){var t,i,u,r,f,e;if(disableFiberService(),testing(),clearOutputArea(),t=[],i=[],$.each(network.body.nodes,function(n){var i={id:network.body.nodes[n].options.id,label:network.body.nodes[n].options.label,x:network.body.nodes[n].x,y:network.body.nodes[n].y,shape:network.body.nodes[n].options.shape,size:network.body.nodes[n].options.size,nodedegree:network.body.nodes[n].options.nodedegree,nodetype:network.body.nodes[n].options.nodetype,componentType:nodes.get(network.body.nodes[n].options.id).componentType,icon:network.body.nodes[n].options.icon,color:[{border:network.body.nodes[n].options.color.border,background:network.body.nodes[n].options.color.background,highlight:[{border:network.body.nodes[n].options.color.border,background:network.body.nodes[n].options.color.background}],hover:[{border:network.body.nodes[n].options.color.border,background:network.body.nodes[n].options.color.background}]}],edges:network.getConnectedNodes(network.body.nodes[n].options.id)};let u=network.body.nodes[n].options.id,r;try{r=u.substring(0,7)}catch(f){}i.x!=undefined&&i.y!=undefined&&r!="edgeId:"&&t.push(i)}),$.each(network.body.edges,function(n){var t={id:network.body.edges[n].id,label:network.body.edges[n].options.label,from:network.body.edges[n].fromId,to:network.body.edges[n].toId,dashes:network.body.edges[n].options.dashes,length:network.body.edges[n].options.length,value:network.body.edges[n].options.value,componentType:edges.get(network.body.edges[n].id).componentType,options:[{color:[{color:network.body.edges[n].options.color.color,highlight:network.body.edges[n].options.color.highlight,hover:network.body.edges[n].options.color.hover,inherit:network.body.edges[n].options.color.inherit,opacity:network.body.edges[n].options.color.opacity}],background:[{color:network.body.edges[n].options.background.color,dashes:network.body.edges[n].options.background.dashes,enabled:network.body.edges[n].options.background.enabled,size:network.body.edges[n].options.background.size}],arrows:[{from:[{enabled:network.body.edges[n].options.arrows.from.enabled,type:network.body.edges[n].options.arrows.from.type}],to:[{enabled:network.body.edges[n].options.arrows.to.enabled,type:network.body.edges[n].options.arrows.to.type}]}],font:[{align:network.body.edges[n].options.font.align}],smooth:[{enabled:network.body.edges[n].options.smooth.enabled,roundness:network.body.edges[n].options.smooth.roundness,type:network.body.edges[n].options.smooth.type}]}]};i.push(t)}),u={nodes:t,edges:i},r=JSON.stringify(u,undefined,2),n){addNetworData(r);return}f="NetworkFile.json";e=new Blob([r],{type:"text/plain;charset=utf-8"});saveAs(e,f)}function download(){}function handleFileSelect(n){const t=new FileReader;t.onload=handleFileLoad;t.readAsText(n.target.files[0])}function handleFileLoad(n){_import_json=n.target.result;importNetwork()}function importNetwork(){var t,n,i;disableFiberService();init(!0);nodes=[];edges=[];testing();document.getElementById("import_button").addEventListener("change",handleFileSelect,!1);t=_import_json;n=JSON.parse(t);_edgesDB.insert(n);nodes=getNodeData(n.nodes);edges=getEdgeData(n.edges);data={nodes:nodes,edges:edges};counter=counter+Number(nodes.length);localStorage.setItem("nodelength",counter);i={layout:{randomSeed:seed},locale:document.getElementById("locale").value,interaction:{navigationButtons:!0,keyboard:!0,multiselect:!0,hover:!0},physics:!1,nodes:{shape:"dot",size:8},edges:{smooth:{enabled:!1,type:"continuous"}},manipulation:{enabled:!1,addNode:function(n,t){document.getElementById("operation").innerText="Add Node";document.getElementById("node-id").value=n.id;document.getElementById("node-label").value="site 1";document.getElementById("node-degree").value="5";document.getElementById("ddlnodeshape").value="dot";document.getElementById("ddlnodeType").value="ROADM";document.getElementById("saveButton").onclick=saveData.bind(this,n,t);document.getElementById("cancelButton").onclick=clearPopUp.bind();document.getElementById("network-popUp").style.display="block"},editNode:function(n,t){document.getElementById("operation").innerText="Edit Node";document.getElementById("node-id").value=n.id;document.getElementById("node-label").value=n.label;document.getElementById("node-degree").value=n.nodedegree;document.getElementById("ddlnodeType").value=n.nodetype;document.getElementById("ddlnodeshape").value=n.shape;n.nodeedit="true";document.getElementById("saveButton").onclick=saveData.bind(this,n,t);document.getElementById("cancelButton").onclick=cancelEdit.bind(this,t);document.getElementById("addButton").addEventListener("click",function(){AddData(this,0)});document.getElementById("addAmpButton").addEventListener("click",function(){AddData(this,1)});document.getElementById("addTraffButton").addEventListener("click",function(){AddData(this,2)});document.getElementById("network-popUp").style.display="block"},addEdge:function(n,t){if(n.from==n.to){var i=confirm("Do you want to connect the node to itself?");if(i!=!0){t(null);return}}document.getElementById("edge-operation").innerText="Add Edge";editEdgeWithoutDrag(n,t)},editEdge:{editWithoutDrag:function(n,t){document.getElementById("edge-operation").innerText="Edit Edge";editEdgeWithoutDrag(n,t)}}}};network=new vis.Network(container,data,i);network.on("click",function(n){n.event="[original event]";console.log(n.pointer);this.getNodeAt(n.pointer.DOM)||(this.getEdgeAt(n.pointer.DOM)?($("#txtNodeX").val(n.pointer.canvas.x),$("#txtNodeY").val(n.pointer.canvas.y)):($("#txtNodeX").val(n.pointer.canvas.x),$("#txtNodeY").val(n.pointer.canvas.y)))});network.on("selectEdge",function(n){if(_insertnodeDB().remove(),n.edges.length>1||n.edges.length==0){copyData.edges=[];copyData.nodes=[];copyData.dataCopied=!1;return}var t=this.body.edges[this.getEdgeAt(n.pointer.DOM)];n.label=network.body.edges[n.edges[0]].options.label;_insertnodeDB.insert({id:n.edges[0],type:"NodeInsert",label:n.label});setCopyData(t.options.id,"")});network.on("selectNode",function(n){var t=this.body.nodes[this.getNodeAt(n.pointer.DOM)],i=network.getConnectedEdges(t.id);if(localStorage.setItem("deletenodeconectededge",i.length),_nodesDB.insert({id:t.id,type:"node"}),setCopyData("",t.options.id),isAddEdge==1){if(isAddService=0,addServicData={from:"",to:""},addEdgeData.from=="")addEdgeData.from=t.options.id;else if(addEdgeData.to==""){if(addEdgeData.from==t.options.id){alert("pls click destination source");return}addEdgeData.to=t.options.id}addEdgeData.from!=""&&addEdgeData.to!=""&&manualAddEdge()}if(isAddService==1){if(isAddEdge=0,addEdgeData={from:"",to:""},addServiceData.from=="")addServiceData.from=t.options.id;else if(addServiceData.to==""){if(addServiceData.from==t.options.id){alert("pls click destination source");return}addServiceData.to=t.options.id}console.log(addServiceData);addServiceData.from!=""&&addServiceData.to!=""&&manualAddService();console.log(addServiceData)}});network.on("doubleClick",function(){var n=_nodesDB().first();n.type=="node"?network.editNodeMode():network.editEdgeMode();_nodesDB().remove()});network.on("oncontext",function(n){var h=_nodesDB().first(),f,t,e,o,i,s,r,u;h.type=="node"?(f=this.body.nodes[this.getNodeAt(n.pointer.DOM)],f!=undefined&&(document.getElementById("edgecontextMenu").style.display="none",$("#contextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),document.getElementById("contextMenu").style.display="block",t=this.body.nodes[this.getNodeAt(n.pointer.DOM)],document.getElementById("nodeiddetails").value=t.id,n.id=t.id,e=network.body.nodes[t.id].options.label,document.getElementById("nodeeditlabel").value=e,document.getElementById("nodeedit-degree").value=network.body.nodes[t.id].options.nodedegree,document.getElementById("ddleditnodeType").value=network.body.nodes[t.id].options.nodetype,$("#ddlshape").val(network.body.nodes[t.id].options.shape),$("#ddlcolor").val(network.body.nodes[t.id].options.color.background),document.getElementById("rightClickNodeEdit").onclick=rightClickNodeEdit.bind(),document.getElementById("rightClickNodeDelete").onclick=deleteNodeEdge.bind())):(o=this.body.edges[this.getEdgeAt(n.pointer.DOM)],o!=undefined&&(document.getElementById("contextMenu").style.display="none",$("#edgecontextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),document.getElementById("edgecontextMenu").style.display="block",i=this.body.edges[this.getEdgeAt(n.pointer.DOM)],document.getElementById("edgeiddetails").value=i.id,document.getElementById("from").value=network.body.edges[i.id].options.from,document.getElementById("to").value=network.body.edges[i.id].options.to,network.body.edges[i.id].options.label!=undefined&&(s=network.body.edges[i.id].options.label,document.getElementById("edgelabel").value=s),r=network.body.edges[i.id].options.arrows.to.enabled,u=network.body.edges[i.id].options.arrows.from.enabled,document.getElementById("edgearrow").value=r==!0&&u==!0?"to,form":r==!0?"to":u==!0?"from":"",document.getElementById("InsertNode").addEventListener("click",function(){AddData(this,0)}),document.getElementById("Copy").onclick=copy.bind(),document.getElementById("rightClickEdgeEdit").onclick=rightClickEdgeEdit.bind(),document.getElementById("rightClickEdgeDelete").onclick=deleteNodeEdge.bind()));copy=="Yes"&&(document.getElementById("contextMenu").style.display="none",$("#pastecontextMenu").css({left:n.event.pageX+20+"px",top:n.event.pageY+20+"px"}),document.getElementById("pastecontextMenu").style.display="block",document.getElementById("Paste").onclick=paste.bind());_nodesDB().remove()});container.addEventListener("dragover",function(n){n.preventDefault()});container.addEventListener("dragenter",function(n){n.target.className+=" dragenter"});container.addEventListener("dragleave",function(n){n.target.className="whiteBox"});container.addEventListener("drop",function(n){var t;n.dataTransfer.getData("text")=="btnAddMode"&&(counter=counter+1,localStorage.setItem("nodelength",counter),t=localStorage.getItem("nodelength"),t!=0?network.body.data.nodes.add({id:token(),label:"site "+Number(t)+"",nodedegree:"5",nodetype:"ROADM",shape:"dot",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}):network.body.data.nodes.add({id:token(),label:"site 1",nodedegree:"5",nodetype:"ROADM",shape:"dot",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}));n.dataTransfer.getData("text")=="btnAddAmp"&&(counter=counter+1,localStorage.setItem("nodelength",counter),t=localStorage.getItem("nodelength"),t!=0?network.body.data.nodes.add({id:token(),label:"site "+Number(t)+"",nodedegree:"5",shape:"triangle",color:"red",nodedegree:"2",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}):network.body.data.nodes.add({id:token(),label:"site 1",nodedegree:"5",shape:"triangle",color:"red",nodedegree:"2",x:n.layerX-$("#mynetwork").width()/2,y:n.layerY-$("#mynetwork").height()/2,componentType:"node"}));n.preventDefault()});network.on("dragStart",function(){});network.on("dragEnd",function(n){n.event="[original event]"});network.on("hoverNode",function(n){try{var t=nodes.get(n.node),i=t.label;$("#click").css({left:n.event.pageX+20+"px",top:n.event.pageY-40+"px"});$("#click").html(htmlTitle("label : "+i+"\ntype : "+t.componentType,t.color));$("#click").show()}catch(r){}});network.on("blurNode",function(){$("#click").hide()});network.on("hoverEdge",function(n){try{var t=edges.get(n.edge),i="("+nodes.get(t.from).label+" -> "+nodes.get(t.to).label+")";$("#click").css({left:n.event.pageX+20+"px",top:n.event.pageY-40+"px"});$("#click").html(htmlTitle("dir : "+i+"\ntype : "+t.componentType,t.color));$("#click").show()}catch(r){}});network.on("blurEdge",function(n){console.log("blurEdge Event:",n);$("#click").hide()});testing()}function getNodeData(n){return n.forEach(function(n){importNodes.push({id:n.id,label:n.label,shape:n.shape,icon:n.icon,color:n.color[0],edges:n.edges[0],x:n.x,y:n.y,title:n.title,size:n.size,componentType:n.componentType,nodedegree:n.nodedegree,nodetype:n.nodetype})}),new vis.DataSet(importNodes)}function getNodeById(n,t){for(var i=0;i<n.length;i++)if(n[i].id==t)return n[i];throw"Can not find id '"+t+"' in data";}function getEdgeData(n){return n.forEach(function(n){var t={align:""+n.options[0].font[0].align+""},i={to:{enabled:n.options[0].arrows[0].to[0].enabled,type:n.options[0].arrows[0].to[0].type},from:{enabled:n.options[0].arrows[0].from[0].enabled,type:n.options[0].arrows[0].from[0].type}},r={enabled:n.options[0].smooth[0].enabled,type:n.options[0].smooth[0].type,roundness:n.options[0].smooth[0].roundness},u="("+nodes.get(n.from).label+" -> "+nodes.get(n.to).label+")";importEdges.push({id:n.id,from:n.from,to:n.to,dashes:n.dashes,label:n.label,font:t,arrows:i,smooth:r,color:n.options[0].color[0].color,componentType:n.componentType})}),new vis.DataSet(importEdges)}function objectToArray(n){return Object.keys(n).map(function(t){return n[t].id=t,n[t]})}function addConnections(n,t){t=n.id;n.edges=network.getConnectedNodes(t)}function setCopyData(n,t){var r;copyData.edges=[];copyData.nodes=[];var i=[],u="",f="";t==""&&n!=""&&(i=network.body.edges[n],u=network.body.nodes[i.fromId],f=network.body.nodes[i.toId]);t!=""&&n==""&&(i=[],u=network.body.nodes[t],f="");r=[];r.push(u);r.push(f);copyData.edges=i;copyData.nodes=r}function getCopiedData(){var t=[];if(copyData.nodes.forEach(function(n){if(counter=counter+1,localStorage.setItem("nodelength",counter),n!=""){var i=token(),r=Number($("#txtNodeX").val());network.body.data.nodes.add({id:i,label:n.options.label,shape:n.options.shape,icon:n.options.icon,color:n.options.color.background,x:n.x+10,y:n.y+10,title:n.options.title,size:n.options.size,nodedegree:n.options.nodedegree,nodetype:n.options.nodetype,componentType:nodes.get(n.options.id).componentType});t.push(i)}}),copyData.edges.length!=0){var n=copyData.edges,i={align:""+n.options.font.align+""},r={to:{enabled:n.options.arrows.to.enabled,type:n.options.arrows.to.type},from:{enabled:n.options.arrows.from.enabled,type:n.options.arrows.from.type}},u={enabled:n.options.smooth.enabled,type:n.options.smooth.type,roundness:n.options.smooth.roundness};network.body.data.edges.add({id:"eid"+Math.random().toString().replace(".","0"),from:t[0],to:t[1],dashes:n.options.dashes,label:n.options.label,font:i,arrows:r,smooth:u,color:n.options.color.color,componentType:edges.get(n.id).componentType});copyData={edges:[],nodes:[],dataCopied:!1}}}function SaveNetwork(){disableFiberService();exportNetwork(!0)}function StorageClear(){disableFiberService();counter=0;deletedata("1");init()}function manualAddEdge(){var n=0,t=0,u=network.body.nodes[addEdgeData.from].options.nodedegree,f=network.body.nodes[addEdgeData.to].options.nodedegree,e=network.getConnectedEdges(addEdgeData.from),o=network.getConnectedEdges(addEdgeData.to),r;e.forEach(function(t){var r=edges.get();for(i=0;i<r.length;i++)t==r[i].id&&r[i].componentType=="edge"&&(n=n+1)});o.forEach(function(n){var r=edges.get();for(i=0;i<r.length;i++)n==r[i].id&&r[i].componentType=="edge"&&(t=t+1)});n<Number(u)&&t<Number(f)?(r="["+nodes.get(addEdgeData.from).label+" - "+nodes.get(addEdgeData.to).label+"]",network.body.data.edges.add({id:token(),from:addEdgeData.from,to:addEdgeData.to,label:r,font:{align:"top"},componentType:"edge"}),addEdgeData={from:addEdgeData.to,to:""},UnSelectAll()):alert("Node Degree limit exist")}function manualAddEdgeMode(){UnSelectAll();isAddEdge=1;isAddService=0;addEdgeData={from:"",to:""}}function manualAddService(){var n,t,i,r,o=network.getConnectedEdges(addServiceData.from),s=network.getConnectedEdges(addServiceData.to),u,f,e;o.forEach(function(i){var r=network.body.edges[i].options.from,u=network.body.edges[i].options.to;(r==addServiceData.from&&u==addServiceData.to||r==addServiceData.to&&u==addServiceData.from)&&(n=r,t=u)});s.forEach(function(n){var t=network.body.edges[n].options.from,u=network.body.edges[n].options.to;(t==addServiceData.from&&u==addServiceData.to||t==addServiceData.to&&u==addServiceData.from)&&(i=t,r=u)});n!=undefined&&t!=undefined||i!=undefined&&r!=undefined?(u=network.body.nodes[addServiceData.from].options.componentType,f=network.body.nodes[addServiceData.to].options.componentType,u=="node"&&f=="node"?(e="["+nodes.get(addServiceData.from).label+" - "+nodes.get(addServiceData.to).label+"]",network.body.data.edges.add({id:token(),from:addServiceData.from,to:addServiceData.to,label:e,dashes:!0,color:"red",font:{align:"top"},arrows:arrows1,smooth:smooth1,componentType:"service"}),addServiceData={from:addServiceData.to,to:""},UnSelectAll()):(document.getElementById("edge-popUp").style.display="none",alert("Service not add between amplifier node"))):alert("Create fiber then  service add")}function manualAddServiceMode(){UnSelectAll();isAddService=1;isAddEdge=0;addServiceData={from:"",to:""}}function copy(){disableFiberService();document.getElementById("edgecontextMenu").style.display="none";copyData.dataCopied=!0;copy="Yes"}function paste(){copy=="Yes"&&(document.getElementById("pastecontextMenu").style.display="none",getCopiedData(),copy="No")}function UnSelectAll(){network.unselectAll()}function wholePage(){return disableFiberService(),html2canvas(document.body,{onrendered:function(n){var t=n.toDataURL();$("#result-image").attr("src",t).show();n.toBlob(function(n){saveAs(n,"wholePage.png")})}}),!1}function networkPage(){return disableFiberService(),html2canvas(document.querySelector("#mynetwork"),{onrendered:function(n){var t=n.toDataURL();$("#result-image").attr("src",t).show();n.toBlob(function(n){saveAs(n,"NetworkPage.png")})}}),!1}function disableFiberService(){isAddEdge=0;isAddService=0;addEdgeData={from:"",to:""};addServiceData={from:"",to:""}}function generateMatrix(){var n,t,e,o,s;if($("#matrixDiv").empty(),n=nodes.get(),n.length>0){var r="",u="",f=2,i=2;for(t=0;t<n.length;t++){let s="r1_"+f;e="<input id=h"+s+" value="+n[t].id+" type=hidden />";r+="<th id="+s+">"+n[t].label+" "+e+"<\/th>";rdynamicid="r"+i+"_1";o="<input id=h"+rdynamicid+" value="+n[t].id+" type=hidden />";u+="<tr><td id="+rdynamicid+">"+n[t].label+" "+o+"<\/td>"+addEmptyRC(n.length,"r"+i+"_",t,n[t].id)+"<\/tr>";f++;i++}s="<table id='matrixTable'><tr><th id=r1_1><\/th>"+r+"<\/tr>"+u+"<\/table>";$("#matrixDiv").append(s);console.log(multiarr);$("#matrixTable tr td").click(function(){var e=$(this).attr("id"),o,t,n,s;if(e!=undefined){var i=e.split("_"),h="#h"+i[0]+"_1",c="#hr"+i[1]+"_1",r=$(h).val(),u=$(c).val(),f="#r"+i[1]+"_"+i[0].replace("r","");if($(this).text()=="yes"){if(o=confirm("are you sure , want to remove ?"),o){for(t=edges.get(),n=0;n<t.length;n++)if(t[n].from==r&&t[n].to==u||t[n].from==u&&t[n].to==r){network.body.data.edges.remove(t[n].id);$(this).text("X");$(f).text("X");$(this).removeClass("tdback");$(f).removeClass("tdback");return}return}return}$(this).text("yes");$(f).text("yes");$(this).addClass("tdback");$(f).addClass("tdback");s="["+nodes.get(r).label+" - "+nodes.get(u).label+"]";network.body.data.edges.add({id:token(),from:r,to:u,label:s,font:{align:"top"},componentType:"edge"})}})}$("#myModal").show()}function closemodal(){$("#myModal").hide()}function addEmptyRC(n,t,i,r){for(var f="",e=2,o=nodes.get(),u=0;u<n;u++){if(u==i)f+="<td><\/td>";else{let s=i+"_"+u,n=t+e;f+=checkfiberconnection(r,o[u].id)?"<td style='cursor:pointer;' class='tdback' id="+n+">yes<\/td>":"<td style='cursor:pointer;' id="+n+">X<\/td>"}e++}return f}function checkfiberconnection(n,t){for(var r=edges.get(),u=!1,i=0;i<r.length;i++)if(r[i].from==n&&r[i].to==t||r[i].from==t&&r[i].to==n)return u=!0,!0;return u}function getAllNode(){var i,e,u,t,r,f,n;for($("#nodeDiv").empty(),i=nodes.get(),n=0;n<i.length;n++){for(e="<button class='accordion'>"+i[n].label+"<\/button>",$("#nodeDiv").append(e),u=network.getConnectedNodes(i[n].id),t="",r=0;r<u.length;r++)t+="<p style='padding-left:10px;'>"+nodes.get(u[r]).label+"<\/p>";t="<div class='panel'>Connected Nodes : <br /><br />"+t+"<\/div>";$("#nodeDiv").append(t)}for($("#nodeModal").show(),f=document.getElementsByClassName("accordion"),n=0;n<f.length;n++)f[n].addEventListener("click",function(){this.classList.toggle("active");var n=this.nextElementSibling;n.style.display=n.style.display==="block"?"none":"block"})}function closenodemodal(){$("#nodeModal").hide()}var nodes=null,edges=null,network=null,data=getScaleFreeNetwork(0),seed=2,previousId=0,currentId=0,_edgesDB=new TAFFY,_nodesDB=new TAFFY,_insertnodeDB=new TAFFY,container,exportArea,importButton,exportButton,dropdownshape,isService=0,counter=0,copy,_import_json,jsstoreCon,lastDownTarget,canvas,copyData,rand,token,importNodes,importEdges,storageData,isAddEdge,addEdgeData,isAddService,addServiceData,multiarr;localStorage.setItem("copyedgeid","");localStorage.setItem("copynodeid","");localStorage.setItem("deletenodeconectededge","");$(document).ready(function(){$.getJSON("/Data/MasterData.json",function(n){console.log(n.name);console.log(n.age)}).fail(function(){console.log("An error has occurred.")})});$(document).bind("contextmenu",function(){return!1});window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB.");jsstoreCon=new JsStore.Connection;copyData={nodes:[],edges:[],dataCopied:!1};document.addEventListener("click",function(n){lastDownTarget=n.target.tagName},!1);document.addEventListener("keydown",function(n){lastDownTarget=="CANVAS"&&(n.keyCode==67&&n.ctrlKey&&(copyData.dataCopied=!0),n.keyCode==86&&n.ctrlKey&&copyData.dataCopied&&getCopiedData())},!1);rand=function(){return Math.random().toString(36).substr(2)};token=function(){return rand()+rand()};var fontstyle1={align:"top"},Unidirection={to:{enabled:!1,type:"arrow"},from:{enabled:!0,type:"arrow"}},Bidirection={to:{enabled:!0,type:"arrow"},from:{enabled:!0,type:"arrow"}},smooth1={enabled:!0,type:"curvedCW",roundness:".2"};importNodes=[];importEdges=[];storageData={nodes:[],edges:[]};isAddEdge=0;addEdgeData={from:"",to:""};isAddService=0;addServiceData={from:"",to:""};var fontstyle1={align:"top"},arrows1={to:{enabled:!0,type:"arrow"},from:{enabled:!0,type:"arrow"}},smooth1={enabled:!0,type:"curvedCW",roundness:".2"};multiarr=[];